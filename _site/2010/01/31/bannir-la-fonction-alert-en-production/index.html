<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width initial-scale=1">

  <title>Bannir la fonction alert() en production</title>
  <meta name="description" content="Bannir la fonction alert() en production. Voilà un titre d'article bien singulier ! Les développeurs web comprendront, les autres peut être pas. Il s'agit si...">
  <link href="/public/favicon.ico" rel="shortcut icon" type="image/x-icon" />
  
  <!-- Twitter Bootstrap -->
  <link rel="stylesheet" href='/assets/bootswatch/yeti.min.css'>
  <!-- Font Awesome -->
  <link rel="stylesheet" href='/assets/font-awesome/css/font-awesome.min.css'>
  git
  <link rel="stylesheet" href="/css/main.css">
  
  
  <link rel="canonical" href="http://www.valhalla.fr/2010/01/31/bannir-la-fonction-alert-en-production/">
  <link rel="alternate" type="application/atom+xml" title="Valhalla.fr" href="http://www.valhalla.fr/feed.xml" />
</head>


  <body>

    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container-fluid">
    
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="http://www.valhalla.fr">Valhalla.fr</a>
    </div>

    <div class="collapse navbar-collapse" id="navbar-collapse-1">
      
      <ul class="nav navbar-nav">
        
          
            <li>
            <a href="http://www.valhalla.fr/a-propos/">À Propos</a>
          
          </li>
        
          
            <li>
            <a href="http://www.valhalla.fr/revue/">Revue</a>
          
          </li>
        
          
            <li class="dropdown">
              <a href="http://www.valhalla.fr" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown">Archives <i class="caret"></i></a>
              <ul class="dropdown-menu">
              
                <li><a href="http://www.valhalla.fr/articles-essentiels/">Articles essentiels</a></li>
              
                <li><a href="http://www.valhalla.fr/archives/index.html">Archives chronologiques</a></li>
              
                <li><a href="http://www.valhalla.fr/archives/categories.html">Catégories</a></li>
              
                <li><a href="http://www.valhalla.fr/archives/tags.html">Tags</a></li>
              
              </ul>
          
          </li>
        
          
            <li class="dropdown">
              <a href="http://www.valhalla.fr" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown">Divers <i class="caret"></i></a>
              <ul class="dropdown-menu">
              
                <li><a href="http://www.valhalla.fr/outils/">Outils</a></li>
              
                <li><a href="http://www.valhalla.fr/java/">Java</a></li>
              
                <li><a href="http://www.valhalla.fr/twitter/">Twitter</a></li>
              
              </ul>
          
          </li>
        
      </ul>
      
      <!-- Google Custom Search Engine -->
      <form action="http://www.google.com/cse" id="cse-search-box" _lpchecked="1" class="navbar-form navbar-right" role="search">
        <input type="hidden" name="cx" value="007528237610497066360:tooxybveeoo">
        <input type="hidden" name="ie" value="UTF-8">
        <input name="siteurl" type="hidden" value="http://www.valhalla.fr">
        <input name="ref" type="hidden" value="">
        <input name="ss" type="hidden" value="">
        <div class="input-group input-group-sm">
          <input type="text" class="form-control" name="q" style="background: url(http://www.google.com/cse/intl/en/images/google_custom_search_watermark.gif) 0% 50% no-repeat rgb(255, 255, 255);">
        </div>
      </form>
      <!-- END Google Custom Search Engine -->
            
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>

    <div id="page-content">
      <div class="container">
  <div class="row">
    <div class="col-md-2 col-sm-1"></div>
    <div class="col-md-8 col-sm-10 col-xs-12">
      <div class="page-header">
        <h1>
          Bannir la fonction alert() en production
          <small>
              31 Jan 2010
              
               • 
                  
                      GF
                  
              

              
          </small>
        </h1>
      </div>
      
      <div class="text-content"><p>Bannir la fonction alert() en production. Voilà un titre d'article bien singulier ! Les développeurs web comprendront, les autres peut être pas. Il s'agit simplement pour moi de vous raconter une mésaventure récente, avec Firefox et un add-on défectueux, et de pousser un "coup de gueule" contre l'utilisation de la fonction alert() dans des programmes distribués à l'attention de l'utilisateur final.</p>
<p><a id="more"></a><a id="more-295"></a></p>
<p>La fonction alert() est un fonction JavaScript -que l'on retrouve dans d'autres langages de script- qui indique au navigateur d'afficher une fenêtre "par dessus" la page web. Cette fenêtre -il s'agit en réalité d'une "boîte de dialogue"- contient un message de texte, inscrit par le développeur entre les parenthèses de la fonction, et un bouton "ok". Le navigateur est bloqué tant que l'utilisateur n'a pas cliqué sur le bouton "ok".</p>
<p>Cette fonction est particulièrement utile dans deux cas. En premier lieu, elle permet de s'assurer que l'utilisateur a bien vu le message -faute de savoir s'il l'a bien lu-, puisqu'il doit cliquer sur "ok" pour continuer à utiliser son navigateur. Elle permet donc de signaler les choses vraiment importantes, ou d'arrêter l'utilisateur avant qu'il fasse une "bêtise". En second lieu, elle permet aux développeurs de tester ou de "débogger" leurs applications. Par exemple, si un développeur programme une fonction mathématique complexe, il pourra placer des "alert()" à plusieurs endroits de la fonction afin de vérifier, étape par étape, que les calculs se déroulent comme prévu.</p>
<p>La fonction alert() présente toutefois certains dangers. Voici ce qui m'est arrivé. Suite à l'installation de Firefox 3.6, un add-on certifié pour cette version, mais développé pour la version précédente (3.5) a cessé de fonctionner. Jusque là, rien de vraiment étonnant. Le problème est que le développeur de cet add-on avait placé dans une fonction "alert()" les éventuels messages d'erreur. Or, le but de cet add-on était d'agir sur l'interface graphique de Firefox, en la modifiant. </p>
<p>Le résultat fut catastrophique : à chaque utilisation d'un élément de l'interface de Firefox, l'add-on intervenait, et le message d'erreur alert() était affiché. D'où le cercle vicieux suivant : je clique sur le menu "outils", afin d'accéder à l'option "modules complémentaires" qui permet d'activer et de désactiver les add-ons, afin de désactiver l'add-on défectueux, mais celui-ci intercepte le clic sur le menu et affiche la boîte de dialogue alert() qui empêche le menu de s'afficher ; je clique sur "ok" pour fermer la boîte de dialogue ; je clique à nouveau sur le menu "outils" et la boîte de dialogue apparaît à nouveau... Bref, impossible de désactiver l'add-on en question, impossible d'utiliser Firefox normalement.</p>
<p>A ce niveau de l'article, les lecteurs avertis penseront "quel imbécile, il suffit de démarrer Firefox avec un autre profil, et le problème disparaît" tandis que les lecteurs néophytes penseront "dans une telle situation, mon Firefox inutilisable, j'utiliserais un autre navigateur". Il existe en effet plusieurs moyens "alternatifs" de neutraliser un add-on défectueux lorsque celui-ci empêche le fonctionnement normal de Firefox. Cependant, et c'est en cela que cet article est un "coup de gueule", un add-on ne devrait jamais pouvoir rendre le navigateur inutilisable. La fondation Mozilla devrait revoir en profondeur son moteur d'add-ons, et prévoir des sécurités pour que l'utilisateur "de base" ne soit pas confronté à ce genre de problèmes. Empêcher les add-ons d'utiliser des fonctions qui paralysent Firefox, ou empêcher la fonction alert() de paralyser Firefox, serait un premier pas. De leur côté, les développeurs d'add-ons devraient retirer la fonction alert() du code source avant de distribuer leurs produits.</p>
<p>Si vous êtes confronté au problème d'un add-on défectueux, et que vous ne savez pas duquel il s'agit ou que vous ne pouvez pas le désactiver depuis Firefox, pour une raison ou pour une autre, deux solutions s'offrent à vous : lancer Firefox avec un autre profil utilisateur ou supprimer votre profil utilisateur (une recherche Google vous permettra d'en savoir plus, selon votre plateforme) ou utiliser le "safe mode" de Firefox. C'est cette dernière solution, moins drastique, que j'ai choisie. Il s'agit tout simplement de démarrer Firefox sans aucun add-on ou plugin.</p>
<p>- Sous Mac OS X, ouvrez l'application Terminal (dans /Applications/Utilitaires) et tapez la commande suivante : <em>/Applications/firefox.app/Contents/MacOS/firefox  -safe-mode</em><br />
- Sous Linux, ouvrez une console et tapez la commande suivante : <em>firefox  -safe-mode</em><br />
- Sous Windows, utilisez le lien <em>Firefox (Mode Sans échec)</em> du menu "Démarrer".</p>
<p><a href="http://www.flickr.com/photos/valhallafr/4320226638/" title="fffailsafe de GF @ valhalla.fr, sur Flickr"><img src="http://farm5.static.flickr.com/4019/4320226638_993ff3ec4e_o.png" width="356" height="201" alt="fffailsafe" /></a></p>
<p>Avant de conclure, j'aimerais étendre ma critique de l'utilisation de la fonction alert() aux scripts AJAX, et particulièrement à ceux qui sont exécutés en boucle.</p>
<p>Les technologies du Web 2.0 permettent de rapprocher les applications web des applications natives, en adoptant des comportements auxquels les utilisateurs sont habitués. La technologie la plus souvent utilisée est AJAX, qui permet au navigateur de communiquer avec le serveur de manière asynchrone. Autrement dit, la page se charge en fond de tâche, sans que l'utilisateur s'en rende compte, et les informations sont mises à jour continuellement sans qu'il soit nécessaire de recharger la page manuellement. Cela passe par l'utilisation de scripts JavaScript, dans lesquels des fonctions alert() ont pu se glisser. </p>
<p>Typiquement, le développeur aura laissé une fonction alert() avertissant que la fonction AJAX a échoué, parce que le serveur est injoignable ou qu'il a donné une réponse incomplète à la requête du navigateur. Tout aussi typiquement, le développeur aura mis en place un système de boucle pour que la fonction soit exécutée à nouveau si la première exécution n'a pas réussi. Voilà donc un autre cercle vicieux : les boîte des dialogue alert() s'ouvrent l'une après l'autre, trop rapidement pour que l'on puisse toutes les fermer. Le pauvre utilisateur se retrouve au bout de quelques secondes avec des dizaines de fenêtres alert() qui s'empilent sur son écran, rendent instable son navigateur, et ralentissent son système... Cela ne vous est-il jamais arrivé ?</p>
<p>La solution n'est pas idéale : il faut "forcer" la fermeture du navigateur. Commande+Alt+Esc sous Mac OS X ou le fameux Ctrl+Alt+Suppr sous Windows. La solution est simple, certes, mais encore faut-il la connaître, et je parie que la plupart des internautes l'ignorent. En outre, fermer un logiciel de cette manière signifie, le plus souvent, perdre toutes les données non enregistrées (les onglets ouverts, les messages en cours de rédaction, etc.).</p>
<p>Ma conclusion est donc la suivante : la fonction alert() crée plus de problèmes, pour l'utilisateur final, qu'elle ne génère d'avantages. Elle doit donc être complètement supprimée des scripts de production, et réservée exclusivement aux versions de développement de ces scripts.</p>
</div>
      
      <hr>
      
      <div class="related">
        <h2>Voir aussi</h2>
        <ul style="list-style-type: none;">
        
            <li><a href="/2015/07/01/jekyll-hierarchie-de-dossiers/">Jekyll: une hiérarchie de dossiers</a></li>
        
            <li><a href="/2015/06/30/partitions-rebelles/">Partitions rebelles (à propos de Bootcamp)</a></li>
        
            <li><a href="/revue/numero-114/">Numéro 115 - Semaines du 23 mars au 5 avril 2015</a></li>
        
            <li><a href="/revue/numero-114/">Numéro 114 - Semaines du 9 au 22 mars 2015</a></li>
        
            <li><a href="/revue/numero-113/">Numéro 113 - Semaine du 23 février au 8 mars 2015</a></li>
        
            <li><a href="/revue/numero-112/">Numéro 112 - Semaine du 16 au 22 février 2015</a></li>
        
            <li><a href="/revue/numero-111/">Numéro 111 - Semaine du 8 au 15 février 2015</a></li>
        
            <li><a href="/revue/numero-110/">Numéro 110 - Semaines du 26 janvier au 8 février 2015</a></li>
        
            <li><a href="/revue/numero-109/">Numéro 109 - Semaine du 19 au 25 janvier 2015</a></li>
        
            <li><a href="/revue/numero-108/">Numéro 108 - Semaine du 12 au 18 janvier 2015</a></li>
        
        </ul>
      </div>
      
      
      <hr>
      <div class="comments">
        <div id="disqus_thread"></div>
<script type="text/javascript">
var disqus_shortname = 'valhallafr';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    
      </div>
      
      
    </div>
    <div class="col-md-2 col-sm-1">
  </div>
</div>

    </div>

    <div class="container-fluid" id="footer">
  <div class="row">
    
    <div class="col-md-4 col-sm-6">
      <ul class="no-bullet">
        <li>Valhalla.fr</li>
        <li>Ad Absurdum</li>
        <li><small>Tous droits réservés, sauf mention contraire.</small></li>
        <li><small>Mis à jour le  2 Jul 2015 à 00h01.</small></li>
      </ul>
    </div>
    
    <div class="col-md-4 col-sm-6">
      <a href="mailto:your-email@domain.com" id="gh" target="_blank" title="Contact">
        <span class="fa-stack fa-lg">
          <i class="fa fa-at fa-stack-1x"></i>
        </span>
        your-email@domain.com
      </a>
      <br>
      <a href="http://www.valhalla.fr/feed.xml" id="gh" target="_blank" title="RSS">
        <span class="fa-stack fa-lg">
          <i class="fa fa-rss-square fa-stack-1x"></i>
        </span>
        RSS
        </a>
    </div>
    
    <div class="col-md-4 col-sm-6">
      
      <a href="https://twitter.com/jekyllrb" id="gh" target="_blank" title="Twitter">
        <span class="fa-stack fa-lg">
          <i class="fa fa-twitter fa-stack-1x"></i>
        </span>
        Twitter
      </a>
      
      
      <br>
      <a href="https://github.com/mw4rf"  target="_blank" title="GitHub">
        <span class="fa-stack fa-lg">
          <i class="fa fa-github fa-stack-1x"></i>
        </span>
        GitHub
      </a>
      
    </div>
    
  </div>
</div>

      <script src="/assets/jquery.min.js" type="text/javascript" charset="utf-8"></script>
  <script src="/assets/bootstrap/js/bootstrap.min.js" type="text/javascript" charset="utf-8"></script>
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-2290016-1', 'auto');
  ga('send', 'pageview');
</script>

  </body>

</html>
