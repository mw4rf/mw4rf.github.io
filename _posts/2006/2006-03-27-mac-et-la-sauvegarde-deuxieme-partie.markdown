---
layout: post
status: publish
published: true
title: ".Mac et la sauvegarde (deuxième partie)"
author:
  display_name: GF
  login: gflorimond
  email: gf@valhalla.fr
  url: http://www.valhalla.fr
author_login: gflorimond
author_email: gf@valhalla.fr
author_url: http://www.valhalla.fr
excerpt: "<img src=\"/public/posts/2006-11-27-dotmac/dotmac.png\" alt=\".Mac\" align=\"left\"/>\r\nDans
  cette deuxième partie de l'article consacré à .Mac, nous parlerons des services
  de stockage intégrés à .Mac. Apple met en effet à disposition des abonnés à .Mac
  un espace de stockage de <s>1 Go</s> 10 Go <i>(depuis septembre 2007)</i> qu'ils
  peuvent utiliser à loisir pour stocker des données et y accéder depuis n'importe
  quel poste. Le stockage n'est pas la synchronisation: cette fois, il s'agit de sauvegarder
  les fichiers importants de données personnelles qui ne changent pas fréquemment.
  Nous parlerons d'abord de l'espace de stockage lui-même et de sa répartition entre
  iDisk et les e-mails. Nous verrons ensuite comment utiliser cet espace pour réaliser
  des sauvegardes avec le logiciel Backup. Enfin, last but not least, nous verrons
  ce qu'est l'iDisk, les différentes manières de l'utiliser (sous Mac et sous Windows),
  ses points forts et ses points faibles.\r\n\r\n"
wordpress_id: 91
wordpress_url: http://blog.gfblog.com/index.php/2006/03/27/mac-et-la-sauvegarde-deuxieme-partie/
date: '2006-03-27 22:43:07 +0200'
date_gmt: '2006-03-27 21:43:07 +0200'
categories:
- Internet
- Mac
tags:
- Mac
- Internet
- software
- Web
- serveur
- Apple
permalink:  /2006/03/27/mac-et-la-sauvegarde-deuxieme-partie/
---
<p><img src="/public/posts/2006-11-27-dotmac/dotmac.png" alt=".Mac" align="left"/><br />
Dans cette deuxième partie de l'article consacré à .Mac, nous parlerons des services de stockage intégrés à .Mac. Apple met en effet à disposition des abonnés à .Mac un espace de stockage de <s>1 Go</s> 10 Go <i>(depuis septembre 2007)</i> qu'ils peuvent utiliser à loisir pour stocker des données et y accéder depuis n'importe quel poste. Le stockage n'est pas la synchronisation: cette fois, il s'agit de sauvegarder les fichiers importants de données personnelles qui ne changent pas fréquemment. Nous parlerons d'abord de l'espace de stockage lui-même et de sa répartition entre iDisk et les e-mails. Nous verrons ensuite comment utiliser cet espace pour réaliser des sauvegardes avec le logiciel Backup. Enfin, last but not least, nous verrons ce qu'est l'iDisk, les différentes manières de l'utiliser (sous Mac et sous Windows), ses points forts et ses points faibles.</p>
<p><a id="more"></a><a id="more-91"></a></p>
<h2>Deuxième partie: Les services de stockage</h2>
<p><a href="http://www.valhalla.fr/index.php/2006/03/27/mac-et-la-synchronisation-premiere-partie/">Première partie: .Mac et la synchronisation</a><br />
Deuxième partie: .Mac et la sauvegarde<br />
<a href="http://www.valhalla.fr/index.php/2006/03/28/mac-et-les-services-en-ligne-troisieme-partie/">Troisième partie: .Mac et les services en ligne</a><br />
<a href="http://www.valhalla.fr/index.php/2006/03/29/mac-et-les-logiciels/">Quatrième partie: .Mac et les logiciels</a></p>
<p><strong>1 Go d'espace</strong></p>
<p>.Mac offre <s>1 Go</s> 10 Go <i>(depuis septembre 2007)</i> de stockage. <s>Pour vous donner une idée, c'est à peu près équivalent à 1 CD-ROM et demie ou à 700 disquettes. Pourtant, ce n'est pas beaucoup. Le "giga" de stockage est courant sur internet: par exemple Gmail, le service d'e-mails gratuit de Google, offre près de 3 Go. Avec .Mac on paye près de 100 euro par an pour trois fois moins !</s> Il y a peu de temps encore, Apple ne nous donnait que 250 Go, ce qui était proprement ridicule. <i>En septembre 2007, l'espace de stockage du compte .Mac est passé de 1 Go à 10 Go, sans frais supplémentaire pour l'utilisateur</i>. Heureusement, .Mac est bien plus qu'un compte de courrier électronique ! </p>
<p>En réalité, l'espace de <s>1 Go</s> 10 Go <i>(depuis septembre 2007)</i> se divise en deux parties. La première partie est dédiée aux e-mails, et la seconde au stockage des fichiers personnels: il s'agit de l'iDisk. Il est possible de définir la répartition manuellement, depuis l'interface d'administration de son compte sur www.mac.com. </p>
<p>Il est également possible d'acheter de l'espace de stockage supplémentaire, mais cela ne présente pratiquement aucun intérêt. En effet, comme nous le verrons, l'iDisk n'est pas destiné à accueillir de gros fichiers, de par son mode de fonctionnement. L'iDisk n'est pas censé accueillir des MP3 ou des DivX, il est plutôt fait pour stocker des fichiers Word et Excel.</p>
<p><strong>Backup</strong></p>
<p>.Mac est accompagné d'un logiciel dédié, Backup. Ce bien nommé logiciel est destiné à réaliser des sauvegardes programmées. Perfide Apple ! malgré les apparences, Backup n'est pas gratuit. En effet, si Backup peut être téléchargé depuis les pages de www.mac.com, s'il fonctionne sans numéro de série d'activation et s'il permet de faire des sauvegardes sur d'autres supports que .Mac, il n'en demeure pas moins qu'il faut un compte .Mac actif pour l'utiliser. Il aurait été beaucoup plus <em>fair play</em> de le distribuer gratuitement et de le laisser faire des sauvegardes sur les supports classiques (disque dur ou support externe), en réservant la faculté de sauvegarder vers l'iDisk aux abonnés de .Mac.</p>
<p>Backup est construit principalement autour de 4 idées. Premièrement, il sauvegarde vers l'iDisk, nous l'avons déjà dit. Deuxièmement, ses sauvegardes sont incrémentales, c'est-à-dire que le tout n'est pas sauvegardé à nouveau chaque fois, les fichiers crées un jour sont rajoutés à la sauvegarde de la veille. Concrètement, si vous sauvegardez le lundi 100 Mo, et que vous créez 10 Mo de données supplémentaires à sauvegarder le mardi, vous n'obtiendrez pas deux sauvegardes, l'une de 100 Mo et l'autre de 110 Mo, mais une seule sauvegarde de 110 Mo. Troisièmement, Backup est conçu pour être programmé et se lancer en fond de tâche à une certaine échéance, sans intervention de l'utilisateur. Quatrièmement, Backup permet de restaurer les sauvegardes qu'il opère, c'est-à-dire de revenir aux fichiers sauvegardés à partir de la sauvegarde.</p>
<p>Backup a longtemps été une catastrophe. Sa version 2 n'était pas utilisable. Une des raisons est la lenteur des serveurs .Mac, dont nous parlerons plus loin. En tout état de cause, Backup 2 échouait presque systématiquement lors de nos -nombreux- tests sur la sauvegarde de quelques 1000 fichiers pour 150 Mo de données. Quand il réussissait à les sauvegarder, il ne fallait pas compter sur lui pour les restaurer. Pis encore, en se cassant les dents soit sur la sauvegarde, soit sur la restauration, il corrompait systématiquement le paquet de sauvegarde et rendait le tout irrécupérable (sauf manuellement).</p>
<p>La version 3 de Backup est beaucoup plus performante. Les sauvegardes sont beaucoup plus stables, de même pour les restaurations. L'interface a également été revue, elle s'en trouve améliorée. Il est ainsi possible de choisir des "Plans de sauvegarde" prédéfinis. Le premier plan de sauvegarde permet de sauvegarder le dossier de départ de l'utilisateur courant, qui contient par défaut tous ses fichiers personnels (incluses les préférences des logiciels). Il est prévu que cette sauvegarde se fasse vers un support CD ou DVD (si le Mac possède un SuperDrive !) car Apple part à raison du postulat que l'espace de l'iDisk ne sera pas suffisant pour une telle sauvegarde, et qu'il y aurait de toute manière trop de données à uploader pour que la sauvegarde se fasse dans un temps acceptable. Le second plan permet de sauvegarder les réglages personnels, exactement comme la synchronisation décrite dans la première partie de cet article. Cette option fait double emploi avec la synchronisation prévue par le système, et c'est cette dernière que l'on préférera utiliser. Il est également possible de sauvegarder les données iLife et la musique achetés sur l'iTMS. De même, ces sauvegardes se font sur CD ou DVD. Enfin, il est possible de créer très simplement ses propres plans de sauvegarde. Il suffit pour cela d'ajouter des fichiers et/ou dossiers dans une fenêtre, de planifier l'heure et/ou le jour et la périodicité.</p>
<p><img src="/public/posts/2006-11-27-dotmac/fig2.1.png" alt=".Mac Fig2.1" /></p>
<p>Quand on ouvre un plan de sauvegarde, on a accès à deux fonctions particulièrement intéressantes. La première permet de consulter un historique rapide des sauvegardes. On peut ainsi voir d'un coup d'oeil la date et l'heure des sauvegardes, si elles ont réussi et combien de fichiers ont été sauvegardés, et enfin vers quelle destination ces sauvegardes ont été effectuées. La deuxième fonction intéressante permet de consulter les différentes restaurations possibles. En effet, il n'est pas obligé de choisir de restaurer la dernière sauvegarde en date, l'on peut tout aussi bien choisir dans la liste présentée une sauvegarde plus ancienne. C'est très pratique, et c'est absolument nécessaire. Le principe de la sauvegarde incrémentale veut que si l'on ajoute un fichier dans le dossier a sauvegarder, il soit rajouté au catalogue de sauvegarde, mais corrélativement, que si l'on enlève un fichier de ce dossier, il soit automatiquement supprimé de la sauvegarde ! Il peut ainsi arriver que l'on supprime par erreur un fichier important, sans s'en rendre compte, et que l'on oublie de le restaurer avant la sauvegarde. En gardant pendant un certain temps une trace des sauvegardes antérieures, Backup apporte une solution à ce problème. Backup permet également de choisir de restaurer les fichiers choisis individuellement, plutôt que de restaurer l'entière sauvegarde.</p>
<p><img src="/public/posts/2006-11-27-dotmac/fig2.2.png" alt=".Mac Fig2.2" /></p>
<p>On le voit, Backup est un outil relativement puissant et agréable à utiliser. Cependant, certaines fonctions sont absentes, comme le clonage du système que gèrent depuis longtemps les autres logiciels commerciaux de sauvegarde, et Backup est tributaire de l'iDisk qui laisse parfois à désirer, comme nous allons le voir maintenant.</p>
<p><strong>iDisk</strong></p>
<p><em>Principe</em><br />
L'iDisk est un disque virtuel sur les serveurs Apple. Il permet de sauvegarder vos données et/ou de les synchroniser. Il est possible d'utiliser l'iDisk de deux manières, que nous allons détailler: en connexion WebDav distante, et en volume local.</p>
<p>WebDav est un protocole de transfert de données en ligne. Détailler un tel protocole sort de l'objet de cet article ; ainsi, nous ne verrons que les conséquences de l'utilisation de cette technologie pour l'iDisk. C'est en réalité très simple: il suffit de se connecter à son iDisk (par le menu <em>Aller > iDisk > Mon iDisk</em> du Finder de Mac OS X) pour qu'un nouveau volume soit monté sur le bureau. On peut ensuite utiliser ce volume comme s'il s'agissait d'un disque externe ou d'une clé USB, en "glissant-déposant" les fichiers depuis le disque dur vers l'iDisk et depuis l'iDisk vers le disque dur ou tout autre volume monté.</p>
<p>Cette méthode a deux inconvénients. D'une part, il faut être connecté à internet pendant le temps du transfert ; d'autre part, il est souvent fastidieux d'avoir à déterminer soi même quels sont les nouveaux fichiers à sauvegarder. Pour ceux deux raisons principalement, il existe une autre méthode: monter l'iDisk en volume local. Pour ce faire, il faut activer la synchronisation depuis l'onglet iDisk de la section .Mac des Préférences système.</p>
<p><img src="/public/posts/2006-11-27-dotmac/fig2.3.png" alt=".Mac Fig2.3" /></p>
<p>Un volume appelé "iDisk" sera créer sur le disque dur (il prendra la place de l'iDisk: 1 Go par défaut, plus si vous avez acheté de l'espace supplémentaire). Vous pourrez à loisir copier des fichiers personnels dans ce volume, que vous soyez connecté à internet ou non. Dès qu'une connexion à internet est détectée, le système se charge de synchroniser l'iDisk (case "Automatiquement" sélectionnée, sinon il faut démarrer la synchronisation manuellement en faisant un clic droit sur l'icône du volume iDisk et en choisissant l'option correspondante). Il s'agit d'une véritable synchronisation: ne sont rajoutés que les fichiers nouveaux depuis la dernière synchronisation. </p>
<p>Pour résumer: si vous êtes connecté à internet, les fichiers rajoutés au volume local seront automatiquement envoyés sur les serveurs iDisk. Si vous n'êtes pas connecté à internet, ils le seront dès qu'une connexion sera détectée. La phase de synchronisation active se repère facilement: une petite roue qui tourne à côté de l'icône de l'iDisk dans la barre latérale du Finder, et une barre de progression au bas de la fenêtre du Finder représentant le contenu du volume local.</p>
<p><img src="/public/posts/2006-11-27-dotmac/fig2.4.png" alt=".Mac Fig2.4" /><br />
<img src="/public/posts/2006-11-27-dotmac/fig2.5.png" alt=".Mac Fig2.5" /></p>
<p>Mais attention, la synchronisation ne fonctionne a priori que dans un seul sens: si vous supprimez un fichier du volume sur votre disque dur, il sera corrélativement supprimé de l'iDisk distant ! A ce propos, il convient de remarquer qu'Apple fait tout à l'envers... Dans iTunes supprimer un morceau depuis une liste de lecture ne le supprime pas de la bibliothèque (il se retrouve absent de toute liste de lecture, dans le vide interstellaire), et supprimer un morceau de la bibliothèque ne le supprime pas forcément du disque dur. Pour l'iDisk c'est l'inverse ! Supprimer un fichier du volume local le supprime automatiquement du serveur. Il aurait été <em>vraiment</em> plus judicieux de demander à l'utilisateur, chaque fois qu'un fichier est supprimé du volume local, s'il souhaite ou non le supprimer du serveur !</p>
<p>Néanmoins, si vous formattez votre disque dur et perdez vos données, vous pourrez après avoir réinstallé le système activer la synchronisation iDisk. Cela aura pour effet de copier le contenu de l'iDisk distant sur le disque de manière à créer le volume local. Vous récupérerez ainsi vos données. Mais une fois que le volume est créé, ne vous avisez pas de supprimer un fichier à la légère, à moins d'être sûr de ne plus en avoir besoin ou d'avoir fait des sauvegardes sur d'autres supports.</p>
<p>Côté technique, la synchronisation s'est améliorée. Et heureusement, car elle était tout simplement catastrophique sous les premières versions de Tiger ! Les deux problèmes majeurs étaient les suivants: lenteur insupportable, corruption des sauvegardes et des données de synchronisation. Voici un extrait d'un <a href="http://www.valhalla.fr/index.php/2005/05/05/les-petits-problemes-de-mac-os-104-tiger/">article</a> publié à l'époque de la sortie de Tiger:</p>
<p><em><br />
"Mais le Finder nous réserve une autre perle: la synchronisation .Mac. Apple a bien fait de la pub sur l’intégration de .Mac à Tiger: maintenant, synchronisation automatique du carnet d’adresses, de l’agenda, des comptes Mail, etc. Cela fonctionne. Ce qui ne fonctionne pas c’est .Mac tout court. La bête synchronisation. Sous Panther, avant de formater, j’ai fait une backup générale sur mon iDisk. Heureusement que j’avais aussi fait cette backup sur un disque firewire externe, car j’ai tout perdu. En effet, après avoir installé Tiger, j’ai enclanché la copie locale de l’iDisk: un volume virtuel sur le disque dur, qui est en fait une image de l’iDisk sur les serveurs Apple. Il suffit de placer un fichier dans cette image disque en local pour que le système l’envoie sur les serveurs de .Mac. Enfin, en théorie… Puisque je n’ai jamais réussi à rapatrier le contenu de mon iDisk sur mon ordinateur. J’ai essayé une dizaine de fois, en recommençant à chaque fois à la base. Puis en supprimant les fichiers les moins importants directement sur le serveur pour alléger la masse de données à télécharger. Il n’a quand même rien voulu savoir. J’ai du tout effacer. Une fois tout effacé, ça a marché. Alors j’ai décidé de remettre les fichiers en local pour qu’ils soient mis en ligne. Faire le travail inverse en quelque sorte. Prudent, je n’ai pas tout directement balancé: j’ai commencé avec deux petits dossiers totalisant 20 MO et une centaine de fichiers. Ca a planté. Ca ne fonctionne pas.</p>
<p>Qu’est-ce-que ça fait ? Ca pédale dans la choucroutte: "vérification des éléments à synchroniser", et ça dure toute la nuit ! Jamais il se met à uploader ou télécharger cet imbécile ! Et puis ça bug à mort: quand on veut fermer la cession, MirrorAgent, le daemon qui gère la synchronisation, plante, "ne répond pas". Il faut le killer pour pouvoir rebooter l’ordinateur, un comble ! Si on ne reboot pas, puisque de toute façon ça ne résout pas le problème de .Mac, pensez-vous j’ai bien essayé ; mais qu’on arrête manuellement la synchronisation pour la relancer manuellement, ça plante aussi et ça "freeze", ça ne fait plus rien !</p>
<p>Au final, impossible d’utiliser la synchronisation .Mac avec un volume local. Il me faudra y accéder en ligne en montant le volume distant. C’est l’horreur… j’ai l’habitude d’overwriter (copier en écrasant) l’ancien répertoire de 20 MO avec sa centaine de fichiers tous les jours, de mon disque dur vers l’iDisk, de manière à avoir une sauvegarde fonctionnelle et journalière de mon travail. Bien entendu, seuls quelques fichiers ont été modifiés. La plupart du temps 2 ou 3 sur la centaine, pas plus. Alors si je ne passe pas par le volume local, je vais devoir me manger tous les jours l’upload des 20 MO avec la ridicule vitesse des uploads de l’ADSL en France! Non, ils doivent vraiment sortir un patch pour résoudre ces problèmes d’iDisk, car ce n’est pas normal de payer plus de 100 euro par an pour un service qui, au final, s’avère inexploitable."<br />
</em></p>
<p>Le problème de lenteur n'a malheureusement pas été réglé. Apple est fautive puisque les serveurs .Mac sont localisés aux Etats-Unis et n'ont pas d'équivalent en Europe. Le jour où Apple installera des serveurs .Mac dans chaque pays d'Europe, les temps de transfert seront beaucoup plus rapides. Il ne nous reste plus qu'à attendre...</p>
<p>Le problème de corruption des synchronisations a heureusement été résolu depuis un certain temps. Les dernières versions de Tiger fonctionnent parfaitement avec l'iDisk, et les synchronisations réussissent presque toujours. Et même quand elles échouent, il est très rare que les fichiers soient corrompus. Les conflits de synchronisation ont, quant à eux, presque complètement disparu.</p>
<p>Reste encore un problème à résoudre, qui s'avère particulièrement pénible. Il s'agit du daemon (logiciel s'exécutant en tâche de fond en permanence, sans interface graphique) de synchronisation de l'iDisk, appelé <em>MirrorAgent</em>, qui a une très fâcheuse tendance a planter quand on essaie de le fermer. Ainsi, quand on veut redémarrer ou éteindre le Mac, le système d'exploitation essaie de fermer toutes les applications, MirrorAgent plante, et l'extinction ou le redémarrage sont annulés. Il faut alors persister et attendre parfois de longues minutes pour que le système se décide à se débarrasser de MirrorAgent pour pouvoir enfin se fermer correctement. Parfois, cela va même jusqu'au plantage total du système, si l'on essaye de fermer MirrorAgent en le forçant à quitter.</p>
<p>Pour finir, il faut retenir que l'iDisk en mode WebDav est compatible avec d'autres systèmes d'exploitation. Sous Windows, il est possible d'installer un <a href="http://www.mac.com/1/idiskutility_download.html">petit logiciel</a> qui permet de rajouter un volume iDisk au Poste de travail. Sous Windows comme sous Linux, il est possible de monter l'iDisk comme tout volume WebDav basique.</p>
<p><center><strong>A suivre...</strong></center></p>
<p><a href="http://www.valhalla.fr/index.php/2006/03/27/mac-et-la-synchronisation-premiere-partie/">Première partie: .Mac et la synchronisation</a><br />
Deuxième partie: .Mac et le sauvegarde<br />
<a href="http://www.valhalla.fr/index.php/2006/03/28/mac-et-les-services-en-ligne-troisieme-partie/">Troisième partie: .Mac et les services en ligne</a><br />
<a href="http://www.valhalla.fr/index.php/2006/03/29/mac-et-les-logiciels/">Quatrième partie: .Mac et les logiciels</a></p>
