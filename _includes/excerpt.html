{% assign ribbon = false %}
{% assign firstcat = post.categories | first %}
{% for item in site.data.ribbon %}
    {% if firstcat == item.category %}
        {% assign ribbon = item.ribbon %}
        {% break %}
    {% endif %}
{% endfor %}

{% assign grid = 'grid-item' %}
{% if post.grid-width == 2 %}
    {% assign grid = 'grid-item w2' %}
{% elsif post.grid-width == 3 %}
    {% assign grid = 'grid-item w3' %}
{% elsif post.grid-width == 4 %}
    {% assign grid = 'grid-item w4' %}
{% endif %}

<div class="{{grid}} thumbnail">
    {% if ribbon %}
        <div class="{{ribbon}}">
            <span>{{ post.categories | first }}</span>
        </div>
    {% endif %}
    {% if post.thumbnail %}
        <img class="img-responsive" src="{{ post.thumbnail }}" />
    {% endif %}
    <div class="caption">
        <h2><a href="{{ post.url }}">{{ post.title }}</a></h2>
        {% if post.excerpt %}
            {{ post.excerpt }}
        {% elsif post.content contains '<!--more-->' %}
            {{ post.content | split:'<!--more-->' | first }}
        {% else %}
            {{ post.content | strip_html | truncatewords:50 }} (...)
        {% endif %}

        <small class="text-muted">
        {% include datefr.html %} • 
        {{ post.content | number_of_words }} mots • 
        Thème(s) : {% for cat in post.categories %}{{ cat }} {% endfor %}
        </small>
    </div>
</div>
